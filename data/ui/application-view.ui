<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <requires lib="gtk+" version="3.10"/>

  <!-- Widget hierarchy:

    window = new Dactl.ApplicationWindow ();
     |
     |-> main_vbox = new Gtk.Box (Gtk.Orientation.VERTICAL, 0);
     |     |
     |     |-> overlay = new Gtk.Overlay ();
     |     |    |
     |     |    |-> layout = new Gtk.Stack ();
     |     |        |
     |     |        |-> settings = new Gtk.Box (Gtk.Orientation.HORIZONTAL, 0);
     |     |        |    |
     |     |        |    |-> sidebar = new Dactl.Sidebar ();
     |     |        |    |
     |     |        |    |-> settings_stack = Gtk.Stack ();
     |     |        |        |
     |     |        |        |-> settings_content = new Dactl.Settings ();
     |     |        |
     |     |        |-> configuration = new Gtk.Box (Gtk.Orientation.HORIZONTAL, 0);
     |     |        |
     |     |        |-> (generated page list) = new Dactl.Page ();
     |     |        |
     |     |        |-> ...
     |
     |-> topbar = new Dactl.Topbar (); // as titlebar

  -->

  <template class="DactlUIApplicationView" parent="GtkApplicationWindow">
    <property name="visible">False</property>
    <property name="show-menubar">False</property>
    <property name="title" translatable="yes">Dactl</property>
    <signal name="delete-event" handler="delete_event_cb"/>
    <signal name="configure-event" handler="configure_event_cb"/>
    <signal name="window-state-event" handler="window_state_event_cb"/>
    <signal name="key-press-event" after="yes" handler="key_pressed_cb"/>

    <child>
      <object class="GtkBox" id="main_vbox">
        <property name="visible">True</property>
        <property name="orientation">vertical</property>
        <property name="spacing">0</property>
        <property name="halign">fill</property>
        <property name="valign">fill</property>
        <property name="hexpand">True</property>
        <property name="vexpand">True</property>

        <child>
          <object class="GtkOverlay" id="overlay">
            <property name="visible">True</property>

            <!--
               -<child type="overlay">
               -  <object class="GtkBox" id="dummy">
               -    <property name="visible">True</property>
               -  </object>
               -</child>
               -->

            <child>
              <object class="GtkStack" id="layout">
                <property name="visible">True</property>
                <property name="homogeneous">True</property>
                <property name="transition-type">crossfade</property>
                <property name="transition-duration">400</property>
                <property name="hexpand">True</property>
                <property name="vexpand">True</property>

                <child>
                  <object class="GtkBox" id="settings">
                    <property name="visible">True</property>
                    <property name="orientation">horizontal</property>
                    <property name="halign">fill</property>
                    <property name="valign">fill</property>
                    <property name="hexpand">True</property>
                    <property name="vexpand">True</property>
                    <property name="spacing">0</property>

                    <child>
                      <object class="DactlSidebar" id="sidebar">
                        <property name="visible">True</property>
                      </object>
                    </child>

                    <child>
                      <object class="GtkStack" id="settings_stack">
                        <property name="visible">True</property>
                        <property name="homogeneous">True</property>
                        <property name="transition-type">slide-left-right</property>
                        <property name="transition-duration">400</property>
                        <property name="hexpand">True</property>
                        <property name="vexpand">True</property>

                        <child>
                          <object class="DactlSettings" id="settings_content">
                            <property name="visible">True</property>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                  <packing>
                    <property name="name">layout-hbox</property>
                  </packing>
                </child>

                <child>
                  <object class="DactlConfigurationEditor" id="configuration">
                    <property name="visible">True</property>
                  </object>
                </child>

              </object>
            </child>
          </object>
        </child>

      </object>
    </child>

    <child type="titlebar">
      <object class="DactlTopbar" id="topbar">
        <property name="visible">True</property>
      </object>
    </child>
  </template>
</interface>
